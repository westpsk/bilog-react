{"version":3,"sources":["pages/Time/index.js","pages/Sort/action.js","pages/Sort/index.js"],"names":["unixToFileTime","time","Number","Time","state","unixTime","moment","unix","fileTime","handleFileTimeToUnix","setState","handleUnixToFileTime","handleInput","value","type","console","log","this","className","onChange","style","width","onClick","format","React","Component","actionSortRest","data","actionSortSwap","actionSortActivate","actionSortDeactivate","actionSortLock","actionSortDone","Option","Select","DELAY_UNIT","INIT_SORT_NUM","Timer","Sort","disabled","delay","values","cards","done","strValues","getRandomArray","nums","push","Math","ceil","random","restSort","bubbleSort","swapped","sequence","indexLastUnsorted","length","i","props","indexes","temp","lockIndex","skipped","Array","from","keys","handleSelectChange","onSliderAfterChange","each","clearInterval","start","slice","forEach","event","index","setTimeout","sort","defaultValue","min","max","placeholder","onAfterChange","map","card","classNames","height","transform","sortIndex","isActive","isLocked","connect","action"],"mappings":"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","file":"static/js/sort.f35114ff.chunk.js","sourcesContent":["import React from 'react'\nimport { Button, InputNumber } from 'antd'\nimport BigNumber from \"bignumber.js/bignumber.mjs\"\nimport moment from 'moment'\nimport 'antd/lib/button/style/css'\nimport 'antd/lib/input-number/style/css'\nimport './style.css'\n\nfunction unixToFileTime (time) {\n  return Number(time) * 1e7 + 116444736000000000\n}\n\nfunction fileTimeToUnix (time) {\n  return Number(time) / 1e7 - 11644473600\n}\n\n\nclass Time extends React.Component {\n  state = {\n    unixTime: moment().unix(),\n    fileTime: unixToFileTime(moment().unix())\n  }\n\n  handleFileTimeToUnix = () => {\n    const { fileTime } = this.state\n    const unixTime = fileTimeToUnix(fileTime)\n    this.setState({\n      unixTime\n    })\n  }\n  \n  handleUnixToFileTime = () => {\n    const { unixTime } = this.state\n    const fileTime = unixToFileTime(unixTime)\n    this.setState({\n      fileTime\n    })\n  }\n\n  handleInput = (value, type) => {\n    this.setState({\n      [type]: Number(value)\n    })\n  }\n  \n  render(){\n    console.log(moment().unix(),1212)\n    const { unixTime, fileTime } = this.state\n    return (<div className='time-wrap'>\n      <div>FILETIME TO UNIX</div>\n      <InputNumber\n        value={fileTime}\n        onChange={(value) => this.handleInput(value, 'fileTime')}\n        style={{width: 300}}\n      />\n      <Button onClick={this.handleFileTimeToUnix}>转换</Button>\n      <InputNumber\n        style={{width: 300}}\n        value={unixTime}\n      />\n      \n      <div>UNIX TO FILETIME</div>\n      <InputNumber\n        onChange={(value) => this.handleInput(value, 'unixTime')}\n        style={{width: 300}}\n        value={unixTime}\n      />\n      <Button onClick={this.handleUnixToFileTime}>转换</Button>\n      <InputNumber\n        value={fileTime}\n        style={{width: 300}}\n      />\n      <div className=\"time-detail\">\n        <div>\n          UNIX 时间戳（单位秒，从1970.1.1开始）: \n        </div>\n        <div>\n          {moment.unix(unixTime).format()}  ---- \n          {moment.unix(unixTime).format('YYYY-MM-DD HH:mm:SS')}\n        </div>\n      </div>\n      <div className=\"time-detail\">\n        <div>\n          FILETIME（100ns一次，从1601.1.1开始）: \n        </div>\n        <div>{fileTime}</div>\n      </div>\n    </div>)\n  }\n}\n\n\nexport default Time","export const actionSortRest = data => ({\n  type: 'SORT_RESET',\n  ...data,\n});\nexport const actionSortSwap = data => ({\n  type: 'SORT_SWAP',\n  ...data,\n});\nexport const actionSortActivate = data => ({\n  type: 'SORT_ACTIVATE',\n  ...data,\n});\nexport const actionSortDeactivate = data => ({\n  type: 'SORT_DEACTIVATE',\n  ...data,\n});\nexport const actionSortLock = data => ({\n  type: 'SORT_LOCK',\n  ...data,\n});\nexport const actionSortDone = () => ({\n  type: 'SORT_DONE',\n});\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport { Select, InputNumber, Slider, Button } from 'antd'\nimport * as action from './action.js';\nimport 'antd/lib/button/style/css'\nimport 'antd/lib/slider/style/css'\nimport 'antd/lib/select/style/css'\nimport 'antd/lib/input-number/style/css'\nimport './style.css';\n\nconst Option = Select.Option\nconst INIT_EVENT_DELAY = 20 // 交换的过渡时间\nconst DELAY_UNIT = 1000\nconst HEIGHT_INCREMENT = 3 // 高度的增量, 数组的某一个值 * 增量 = 长方形高度\nconst INIT_SORT_NUM = 20\nconst Timer = {}\n\nclass Sort extends React.Component {\n\n  state = {\n    disabled: false,\n    delay: 100,\n    values: [], // 值为 SORT_ARRAY 的副本\n    cards: [], // 可视化需要的数组，就是每一个长方形（div元素），数组的每一个值都代表一个div元素\n    done: true, // 表示是否排序完成，为true时，右下角出现重置按钮\n    // strValues 用来解决数组中出现重复的值，移动位置不对的情况\n    strValues: [] // 数组的一个副本，会将数组的值与下标拼起来，形成唯一的一个字符串\n  }\n\n  componentDidMount(){\n    this.getRandomArray()\n  }\n\n  // 随机生成1到100的值\n  getRandomArray = (nums = INIT_SORT_NUM) => {\n    let values = []\n    while(nums){\n      values.push(Math.ceil(Math.random() * 100))\n      nums--\n    }\n    this.setState({ values }, () => {\n      this.restSort()\n    })\n  }\n\n  // 冒泡排序方法，返回包括每一步的数组\n  bubbleSort = (values) => {\n    // sequence 为包括每一步内容的数组\n    let sequence = []\n    // swapped 为判断是否已经排序好的 标志位\n    let swapped\n    // indexLastUnsorted 用来减少不必要的循环\n    let indexLastUnsorted = values.length - 1\n    do {\n      swapped = false\n      for (let i = 0; i < indexLastUnsorted; i++) {\n        // card 是 state.cards 的一个成员\n        // 开始一次循环，就有两个card 的 isActive的值设置为true\n        sequence.push(\n          () => this.props.actionSortActivate({indexes: [i, i + 1]})\n        )\n        // 如果前一个数 大于 后一个数，就交换两数\n        if (values[i] > values[i + 1]) {\n          let temp = values[i]\n          values[i] = values[i + 1]\n          values[i + 1] = temp\n          swapped = true\n          // 满足交换的条件，就重新定义所有card的sortIndex属性\n          sequence.push(\n            () => this.props.actionSortSwap({indexes: [i, i + 1]})\n          )\n        }\n        // 结束这次循环之前，把原来两个card的isActive的值为true的，设置为false\n        sequence.push(\n          () => this.props.actionSortDeactivate({indexes: [i, i + 1]})\n        )\n      }\n      // 外层循环，每循环完一次，就锁定最后一个card，下次这个card 就不参与循环\n      let lockIndex = indexLastUnsorted\n      sequence.push(\n        () => this.props.actionSortLock({indexes: [lockIndex]})\n      )\n      indexLastUnsorted--\n    } while (swapped)\n\n    // 如果提前排序好了，把剩下的card全部锁定\n    let skipped = Array.from(Array(indexLastUnsorted + 1).keys())\n    sequence.push(\n      () => this.props.actionSortLock({indexes: skipped})\n    )\n    // 修改done 为true，完成排序\n    sequence.push(this.props.actionSortDone)\n    return sequence\n  }\n\n  onChange = (value) => {\n    this.getRandomArray(value)\n  }\n\n  handleSelectChange = (value) => {\n    this.getRandomArray(Number(value))\n  }\n\n  onSliderAfterChange = (value=1) => {\n    this.setState({\n      delay: DELAY_UNIT/value\n    }, () => {\n      this.restSort()\n    })\n  }\n\n  restSort = () => {\n    const { values } = this.state\n    for(var each in Timer){\n      clearInterval(Timer[each]);\n    }\n    this.setState({\n      disabled: false\n    })\n    this.props.actionSortRest({ values })\n  }\n\n  // todo stop timeout\n  start = () => {\n    // 排序数组，返回一个包括每步的值 和 每步状态的数组\n    const { values, delay } = this.state\n    this.restSort()\n    this.setState({\n      disabled: true\n    })\n    let sequence = this.bubbleSort(values.slice())\n    // 遍历上边排序得到的数组，定时执行操作，实现动画效果\n    sequence.forEach((event, index) => {\n      Timer[`timer${index}`] = setTimeout(() => {\n        if(typeof event === 'function'){\n          event()\n        }\n      }, index * delay)\n    })\n  }\n\n  render() {\n    const { cards } = this.props.sort\n    const { values, disabled } = this.state\n    return (\n      <div className=\"wrapper\">\n        <div className=\"options\">\n          <span className=\"options-item\">\n            <span className=\"label\">选择长度：</span>\n            <Select defaultValue=\"20\" onChange={this.handleSelectChange}>\n              <Option value=\"10\">10</Option>\n              <Option value=\"20\">20</Option>\n              <Option value=\"30\">30</Option>\n              <Option value=\"50\">50</Option>\n            </Select>\n          </span>\n          <span className=\"options-item\">\n            <span className=\"label\">输入长度：</span>\n            <InputNumber\n              min={1}\n              max={200}\n              defaultValue={INIT_EVENT_DELAY}\n              onChange={this.onChange}\n              placeholder=\"请输入排序长度\"\n            />\n          </span>\n          <span className=\"options-item\">\n            <Button\n              onClick={this.start}\n              disabled={disabled}\n              type=\"primary\"\n            >\n              开始排序\n            </Button>\n          </span>\n          <Slider defaultValue={INIT_EVENT_DELAY} onAfterChange={this.onSliderAfterChange} />\n          {/**<div className=\"sort-nums\">\n            要排序的数组：{values.join(' ')}\n          </div> */}\n        </div>\n        \n        <div className=\"cards\">\n        {\n          cards.map((card, index) => {\n            return (\n              <div className=\"card-wrapper\"\n                className={classNames('card-wrapper', {\n                  'card-no-border': values.length > 60\n                })}\n                style={{height: card.value * HEIGHT_INCREMENT + 'px',transform: 'translateX('+card.sortIndex*100+'%)', width: `${100/values.length}%`}}\n                key={index}\n              >\n                <div className={classNames('card', {\n                  'card-active': card.isActive,\n                  'card-locked': card.isLocked\n                })}\n                >\n                  {/*<div className=\"value\">{card.value}</div>*/}\n                </div>\n              </div>\n            )\n          })\n        }\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    sort: state.Sort,\n  };\n}\n\nexport default connect(mapStateToProps, {\n  ...action,\n})(Sort);\n"],"sourceRoot":""}