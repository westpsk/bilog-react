const main = () => {
  let et = '1566217809000'
  let list = [{
      "name": "4F-主会场",
      "content": "欢迎来到BCS2019",
      "time": [7, 13],
      "heat": [10, 9, 11, 11, 9, 10, 11, 11, 8, 10, 10, 9, 12, 10, 36, 45, 80, 100, 100, 100, 100, 100, 100, 100, 90, 80, 70, 60, 10, 12, 10, 11, 9, 8, 9, 11, 10, 8, 11, 8, 10, 10, 10, 9, 11, 12, 10, 11],
      "ap": [145, 146, 147, 148, 149, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420],
    },
    {
      "name": "1F-多功能厅C",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [11, 11, 11, 8, 11, 12, 8, 10, 12, 12, 9, 8, 12, 11, 8, 12, 20, 25, 32, 35, 28, 35, 42, 50, 35, 40, 80, 80, 95, 98, 97, 95, 97, 95, 96, 90, 75, 65, 30, 8, 9, 11, 9, 12, 12, 10, 12, 9],
      "ap": [72, 73, 74, 75],
    },
    {
      "name": "1F-多功能厅B",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [9, 10, 9, 9, 9, 11, 11, 12, 12, 12, 9, 9, 10, 8, 9, 9, 20, 26, 22, 28, 17, 13, 13, 16, 15, 19, 70, 70, 98, 96, 90, 98, 95, 96, 95, 90, 70, 45, 31, 9, 12, 9, 11, 11, 11, 9, 9, 8],
      "ap": [76, 77, 78, 79],
    },
    {
      "name": "1F-多功能厅A",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [8, 9, 11, 8, 8, 11, 10, 12, 11, 10, 12, 9, 12, 10, 11, 9, 20, 26, 22, 28, 39, 35, 53, 53, 26, 37, 71, 69, 97, 98, 89, 99, 97, 98, 95, 91, 71, 43, 31, 8, 9, 10, 11, 9, 9, 8, 8, 10],
      "ap": [80, 81, 82, 83],
    },
    {
      "name": "1F-大宴会厅C",
      "time": [7, 18],
      "content": "欢迎来到BCS2019",
      "heat": [9, 11, 11, 12, 8, 12, 12, 8, 12, 12, 9, 8, 9, 8, 12, 11, 20, 26, 22, 28, 39, 35, 53, 53, 26, 37, 69, 72, 97, 94, 92, 97, 95, 98, 95, 92, 69, 43, 31, 12, 10, 10, 8, 10, 10, 9, 8, 8],
      "ap": [84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95],
    },
    {
      "name": "1F-大宴会厅B",
      "time": [7, 18],
      "content": "欢迎来到BCS2019",
      "heat": [8, 10, 12, 9, 10, 12, 12, 9, 10, 8, 10, 11, 12, 8, 12, 8, 20, 25, 32, 35, 28, 35, 42, 50, 35, 40, 80, 80, 95, 98, 97, 95, 97, 95, 96, 90, 75, 65, 30, 8, 10, 10, 10, 9, 11, 12, 10, 11],
      "ap": [96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107],
    },
    {
      "name": "1F-大宴会厅A",
      "time": [7, 18],
      "content": "欢迎来到BCS2019",
      "heat": [8, 9, 11, 8, 8, 11, 10, 12, 11, 10, 12, 9, 12, 10, 11, 9, 60, 60, 40, 45, 60, 40, 55, 55, 45, 40, 71, 69, 97, 98, 89, 99, 97, 98, 95, 91, 71, 43, 31, 8, 9, 10, 11, 9, 9, 8, 8, 10],
      "ap": [108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119],
    },
    {
      "name": "3F-301A",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [10, 9, 8, 12, 11, 8, 10, 10, 9, 11, 10, 10, 9, 10, 9, 8, 26, 22, 24, 40, 60, 50, 60, 55, 26, 22, 24, 45, 45, 60, 40, 45, 60, 45, 55, 30, 25, 32, 33, 12, 11, 9, 12, 10, 9, 12, 10, 12],
      "ap": [120],
    },
    {
      "name": "3F-301B",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [10, 12, 11, 10, 9, 11, 10, 10, 10, 9, 11, 11, 11, 9, 11, 9, 24, 24, 27, 40, 45, 45, 55, 40, 33, 36, 33, 45, 40, 55, 40, 55, 60, 45, 40, 27, 24, 24, 33, 12, 8, 11, 12, 8, 9, 8, 8, 10],
      "ap": [121],
    },
    {
      "name": "3F-302A",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [8, 12, 11, 8, 11, 12, 11, 8, 12, 11, 12, 12, 10, 12, 9, 9, 30, 36, 30, 60, 50, 45, 40, 55, 24, 30, 36, 45, 45, 50, 40, 45, 50, 40, 45, 33, 24, 24, 33, 12, 12, 10, 12, 9, 9, 10, 10, 11],
      "ap": [122],
    },
    {
      "name": "3F-302B",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [8, 10, 9, 8, 11, 11, 11, 11, 8, 10, 8, 12, 12, 10, 8, 10, 36, 24, 36, 40, 60, 50, 50, 45, 33, 24, 36, 55, 40, 50, 50, 45, 50, 45, 50, 33, 30, 24, 33, 9, 10, 9, 10, 12, 12, 12, 11, 12],
      "ap": [123],
    },
    {
      "name": "3F-303A",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [11, 10, 11, 9, 11, 10, 11, 10, 12, 12, 11, 12, 9, 10, 10, 8, 20, 18, 24, 24, 18, 22, 24, 18, 22, 36, 48, 40, 40, 44, 36, 36, 36, 44, 48, 24, 33, 30, 33, 9, 10, 9, 10, 12, 12, 12, 11, 12],
      "ap": [301],
    },
    {
      "name": "3F-303B",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [10, 10, 8, 8, 12, 10, 10, 12, 11, 12, 9, 11, 12, 12, 11, 8, 20, 24, 24, 22, 22, 16, 22, 20, 18, 36, 32, 44, 36, 36, 40, 44, 36, 36, 44, 27, 27, 36, 36, 6, 10, 7, 7, 7, 8, 11, 7, 10],
      "ap": [302],
    },
    {
      "name": "3F-306A",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [12, 11, 8, 12, 6, 9, 9, 11, 10, 12, 14, 9, 12, 12, 8, 11, 25, 26, 22, 24, 30, 25, 32, 33, 50, 54, 96, 99, 90, 120, 100, 80, 80, 80, 85, 70, 60, 30, 16, 6, 10, 7, 7, 7, 8, 11, 7, 10],
      "ap": [124],
    },
    {
      "name": "3F-306B",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [13, 14, 10, 14, 6, 7, 12, 14, 10, 10, 10, 12, 13, 12, 9, 10, 30, 28, 30, 33, 33, 28, 35, 30, 60, 72, 72, 90, 110, 100, 100, 100, 64, 77, 60, 41, 35, 25, 22, 10, 11, 8, 8, 8, 11, 13, 9, 10],
      "ap": [125],
    },
    {
      "name": "3F-307A",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [10, 12, 12, 10, 9, 9, 9, 10, 12, 13, 13, 12, 9, 8, 7, 9, 26, 30, 25, 33, 33, 28, 23, 36, 50, 54, 96, 99, 100, 80, 90, 100, 64, 84, 54, 41, 39, 30, 20, 7, 11, 9, 7, 9, 8, 12, 10, 10],
      "ap": [126],
    },
    {
      "name": "3F-307B",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [12, 12, 8, 13, 9, 8, 11, 10, 10, 10, 14, 10, 13, 11, 7, 10, 40, 33, 20, 30, 30, 25, 32, 27, 55, 60, 80, 72, 100, 80, 100, 120, 72, 63, 66, 41, 32, 28, 20, 8, 7, 9, 6, 10, 12, 11, 11, 9],
      "ap": [127],
    },
    {
      "name": "3F-308",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [11, 11, 12, 8, 12, 12, 12, 8, 12, 12, 11, 11, 12, 8, 12, 10, 30, 28, 30, 33, 33, 28, 35, 30, 60, 72, 72, 90, 110, 100, 100, 100, 64, 77, 60, 41, 35, 25, 22, 10, 11, 11, 12, 8, 9, 11, 12, 8],
      "ap": [128, 129],
    },
    {
      "name": "3F-309A",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [11, 14, 11, 12, 10, 7, 12, 14, 11, 12, 13, 10, 9, 8, 7, 10, 35, 32, 28, 27, 36, 25, 23, 30, 50, 72, 88, 99, 100, 100, 110, 100, 80, 63, 80, 70, 42, 28, 16, 7, 10, 8, 10, 9, 11, 13, 8, 12],
      "ap": [130, 131, 132],
    },
    {
      "name": "3F-309B",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [10, 11, 12, 10, 10, 11, 12, 13, 12, 13, 12, 12, 9, 12, 9, 9, 20, 18, 22, 36, 27, 34, 23, 30, 50, 72, 96, 81, 100, 100, 100, 80, 64, 70, 66, 45, 39, 28, 20, 9, 10, 10, 6, 7, 10, 13, 8, 10],
      "ap": [133, 134, 135],
    },
    {
      "name": "3F-310",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [10, 13, 9, 14, 10, 11, 9, 14, 10, 12, 12, 12, 9, 8, 6, 11, 30, 25, 32, 27, 33, 31, 29, 30, 40, 60, 72, 99, 100, 100, 110, 100, 72, 56, 54, 45, 32, 20, 20, 9, 10, 10, 8, 8, 12, 11, 7, 12],
      "ap": [136, 137, 138],
    },
    {
      "name": "3F-311A",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [10, 13, 9, 14, 10, 11, 9, 14, 10, 12, 12, 12, 9, 8, 6, 11, 30, 25, 32, 27, 33, 31, 29, 30, 40, 60, 72, 99, 100, 100, 110, 100, 72, 56, 54, 45, 32, 20, 20, 9, 10, 10, 8, 8, 12, 11, 7, 12],
      "ap": [303, 304, 305],
    },
    {
      "name": "3F-311B",
      "time": [13, 18],
      "content": "欢迎来到BCS2019",
      "heat": [10, 13, 9, 14, 10, 11, 9, 14, 10, 12, 12, 12, 9, 8, 6, 11, 30, 25, 32, 27, 33, 31, 29, 30, 40, 60, 72, 99, 100, 100, 110, 100, 72, 56, 54, 45, 32, 20, 20, 9, 10, 10, 8, 8, 12, 11, 7, 12],
      "ap": [306, 307, 308],
    },
    {
      "name": "3F-北序厅",
      "content": "欢迎来到BCS2019",
      "heat": [10, 11, 8, 13, 8, 9, 11, 10, 14, 12, 14, 10, 13, 11, 10, 12, 40, 31, 29, 30, 33, 34, 23, 33, 60, 66, 72, 100, 100, 100, 100, 100, 88, 56, 54, 36, 32, 28, 20, 7, 11, 7, 6, 7, 11, 10, 11, 8],
      "ap": [139, 140, 141],
    },
    {
      "name": "3F-观景连廊",
      "content": "欢迎来到BCS2019",
      "heat": [9, 11, 12, 13, 9, 7, 11, 12, 10, 13, 12, 12, 11, 9, 6, 8, 45, 46, 38, 24, 33, 28, 32, 24, 55, 66, 80, 100, 100, 100, 90, 100, 80, 84, 72, 36, 39, 25, 20, 7, 11, 10, 6, 8, 9, 13, 11, 11],
      "ap": [142, 143, 144],
    },
    {
      "name": "C座大堂",
      "time": [7, 18],
      "content": "ISC2018,零信任,数据驱动安全,安全从零开始,内部威胁,无线安全,泛终端新边界,用户行为分析,360企业安全集团,GDPR,机器学习,大数据,人工智能",
      "heat": [10, 10, 10, 10, 10, 10, 12, 11, 10, 9, 8, 9, 12, 12, 9, 10, 50, 30, 35, 39, 31, 31, 31, 31, 31, 31, 31, 34, 27, 22, 17, 16, 12, 11, 13, 13, 10, 11, 12, 8, 11, 10, 8, 11, 9, 9, 10, 9],
      "ap": [150, 151],
    },
  ]
  const contentArr = 'BCS2019,零信任,数据驱动安全,内生安全,内部威胁,无线安全,泛终端新边界,用户行为分析,奇安信集团,GDPR,机器学习,大数据,人工智能'.split(',')

  if (et) {
    let date = new Date(parseInt(et))
    let hour = date.getHours()
    let minute = date.getMinutes()
    let index = hour * 2
    let alignment = false
    if (minute > 30) {
      index += 1
      minute -= 30
    } else if (minute == 30) {
      minute -= 30
      alignment = true
    } else if (minute == 0) {
      alignment = true
    }
    let apHeat = []
    let contentHeat = []
    let totalHeat = 0
    for (var i = 0; i < list.length; i++) {
      let heat = list[i].heat
      totalHeat += heat
      let data = heat[index]
      let last_data = heat[index - 1]
      let total = Math.floor(data + (last_data - data) / 30 * minute)
      let ap = list[i].ap
      let content = list[i].content
      let time = list[i].time

      for (var j = 0; j < ap.length; j++) {
        apHeat.push({
          id: ap[j],
          value: alignment ? total : random(total - 2, total),
        })
        if (content && time && (hour >= time[0] && hour <= time[1])) {
          let contentarr = content.split(',')
          contentHeat.push({
            id: ap[j],
            content: contentarr[random(0, contentarr.length)],
            time: +(new Date()) - ~~(Math.random() * 2000),
            count: random(5, 10)
          })
        }
      }
    }

    return {
      "apHeat": apHeat,
      "contentHeat": contentHeat,
      "max": 100
    }
  }
  return {
    "apHeat": new Array(154).fill(1).map((d, i) => {
      return {
        id: i + 1,
        value: random(1, 100)
      }
    }),
    "contentHeat": new Array(contentArr.length).fill(1).map((d, i) => {
      return {
        id: random(1, 154),
        content: contentArr[i],
        time: +(new Date()) - ~~(Math.random() * 2000),
        count: random(5, 10)
      }
    }),
    "max": 120
  }
}

const random = (min, max) => {
  return parseInt(Math.random() * (max - min) + min, 10)
}

const res = main()
console.log(res)